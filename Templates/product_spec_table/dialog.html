{% extends '@CRUD/dialog.html' %}

{% set edit_frag_serial = random() %}
{% set action = CRUD.Object.getCurrentAction() %}
{% set bundle = Kernel.bundle('ProductBundle') %}

{#
#}

{% block dialog_body %}
    <div class="action-result-container"> </div>
    <form id="tableSpecForm{{edit_frag_serial}}" class="formkit-form ajax-action" enctype="multipart/form-data" method="post">
        {{ action.renderSignatureWidget|raw }}

        {% if CRUD.Record.id %}
            <input type="hidden" name="id" value="{{ CRUD.Record.id }}"/>
        {% endif %}

        {{ action.renderField('title')|raw }}

        <input type="hidden" name="rows" value="{{ CRUD.Record.getValue('rows') }}"/>
        <input type="hidden" name="columns" value="{{  CRUD.Record.getValue('columns') }}"/>

        {# render rows and columns here #}

        <div class="table-container">
        {% if CRUD.Record.rows and CRUD.Record.columns %}
            {% include "@TableBundle/table.html" with { record: CRUD.Record } %}
        {% endif %}
        </div>

        <div class="button-group">
            {% if CRUD.Record.id %}
                <input class="formkit-widget formkit-widget-submit update button" type="submit" value="更新"/>
            {% else %}
                <input class="formkit-widget formkit-widget-submit create button" type="submit" value="建立"/>
            {% endif %}
        </div>
    </form>

{% endblock %}
